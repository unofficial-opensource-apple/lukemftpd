$NetBSD: ChangeLog,v 1.42 2008/09/27 16:07:36 lukem Exp $

Sat Sep 27 16:05:08 UTC 2008	lukem

	* Tweak make's subdir traversal.

	* Don't assume pid_t can be printed as an int without casting.

	* fts_open.c: fix unused variable if !defined(FTS_ALLOC_ALIGNED)

	* Use AC_PROG_MKDIR_P, and @MKDIR_P@ appropriately.

	* Ensure $YACC is actually usable.

	* Consistency tweaks in AC_MSG_CHECKING.

Sun Sep 21 16:34:30 UTC 2008	lukem

	* Change RCSID from Id to NetBSD.

	* Ship '.manin' variants of the manual pages that are
	  @substitution@ expanded, to fix the paths in the
	  manual pages to match those used in the application.

	* Update to NetBSD-ftpd 20080921:
		* Don't split large commands into multiple commands;
		  just fail on them.
		  This prevents CSRF-like attacks, when a web
		  browser is used to access an ftp server.
		  Reported by Maksymilian Arciemowicz <cxib@securityreason.com>.
		  Fix mostly derived from OpenBSD, written
		  by Moritz Jodeit <moritz@OpenBSD.org>
		* Enhance -C to support an optional @host ('-C user[@host]'):
		  checks whether user as connecting from host would be
		  granted access by ftpusers(5).
		  Support IPv6 in the host directive of ftpusers(5).
		  Both features from Rudolf Cejka <cejkar@fit.vutbr.cz>
		  (FreeBSD's tnftpd port maintainer).

Sat Sep 20 01:47:15 UTC 2008	lukem

	* Add fts_free() to complement fts_alloc(), and use instead of free().
	  Should avoid a memory leak on systems without ALIGNBYTES.

Wed Sep 17 03:43:14 UTC 2008	lukem

	* Check for DIR.dd_fd, DIR.__dd_fd, and dirfd(),
	  and provide a replacement dirfd() if possible.

Fri Aug 15 04:24:01 UTC 2008	lukem

	* Improve "Configuration results" display.
	  Fix handling of with_skey=auto.

Thu Jun 12 09:00:22 UTC 2008	lukem

	* Search for and #include <sys/resource.h> after <sys/time.h>;
	  fixes build on OS X 10.3.x.

Mon Jun  9 03:08:29 UTC 2008	lukem

	* Tagged as "tnftpd-20080609".

	* Updated version to "tnftpd 20080609".

	* RCSID updates, minor documentation improvements.

	* Update to NetBSD-ftpd 20080609:
		* Don't use non-standard "u_<foo>" types.
		* Strip trailing whitespace (as well as ':'s) off PAM
		  password prompts.
		* Improve some debug logging related to PAM.

Sun Jun  1 06:04:00 UTC 2008	lukem

	* Disable --with-skey by default.

	* Forbid --with-pam at the same time as --with-skey.

	* Move IPv6 checks from tnftpd.h to configure.ac.

	* Display a "configuration result" at the end of configure.

	* Remove test for flock() and lockf(); we now just use fcntl() locking.

	* Update to NetBSD-ftpd 20080504:
		* Reorganize USE_PAM so that the PAM conversation has a
		  chance to display a custom message in the 331 reply to USER.
		* Remove clause 3 and 4 from TNF licenses
		* Switch from lockf() to (more portable) fcntl() locking
		* Rename HAVE_SOCKADDR_SA_LEN to HAVE_STRUCT_SOCKADDR_SA_LEN.
		* Use defined(HAVE_foo) instead of just testing HAVE_foo.
		* Replace references from draft-ietf-ftpext-mlst-NN to RFC 3659.
		* Explicitly note the unsupported requests from RFC 2228.
		* Improvements from FreeBSD:
		  - Document `ftp-chroot' from login.conf(5).
		  - Document that SIZE is prevented for files > 10240 bytes
		    via ASCII transfers.
		* Add -n option to display addresses in logs.
		* Rename cred_t to ftpd_cred_t; the former causes a nameclash
		  on Solaris.
		* Expand documentation on numeric argument suffix parsing,
		  and convert to IEC 60027-2 prefixes for 2^n multiples
		  ("KiB" instead of "KB", etc.)

	* Add check for madvise().

Sun Mar  9 21:05:10 UTC 2008	lukem

	* Sync fts source with NetBSD:
	    - Sync to src/include/fts.h 1.17
	    - Sync to src/lib/libc/gen/fts.c 1.31
	  Notable changes:
	    - Coverity CID 17: Free parent if it was not used.
	    - PR/33163: Auster Vl.: fts: cant allocate memory | filename too
	      long.  Change the ftp_pathlen and fts_namelen to u_int from
	      u_short so that pathnames > 32K work.
	    - Use FD_CLOEXEC.
	    - Instead of special-casing root, special case paths that end with
	      a /, so that find foo/ does not print foo//bar. From FreeBSD.
	    - Minimize code diffs with FreeBSD.
	      Return ENAMETOOLONG instead of ENOMEM if name is too long to fit.
	      Only decrement cp if we are pointing to the end of the string.

	* Support @EXEEXT@.  Use .PHONY.

Tue Jul 24 00:06:52 UTC 2007	lukem

	* Set YACC to @YACC@ so that AC_PROG_YACC DTRT on systems
	  that only have bison.

	* Avoid an 'unused variable' warning.

Mon Jul 23 11:42:21 UTC 2007	lukem

	* Don't use non-standard: u_char u_short u_int.
	  Use uint32_t instead of u_int32_t.

	* Add back check for <sys/sysmacros.h> (lost in conversion to
	  autoconf 2.61), as it's needed on Solaris for major() and minor().

	* Provide prototypes for replaced functions: getgrouplist(),
	  inet_net_pton(), usleep().

	* Rename cred_t to ftpd_cred_t; the former causes a nameclash
	  on Solaris.

	* If fts.h isn't usable, force use of our fts_open.c even if
	  the target provides fts_open().
	  Should fix use of fts() with _FILE_OFFSET_BITS=64 on
	  newer Linux/glibc.

	* Consistently use AS_CASE() and AS_IF() in configure.ac.

	* Don't use defined() with HAVE_DECL_xxx.
	  Don't include fts.h if NO_INTERNAL_LS.
	  Use `LL' instead of `L' suffix for fallback defines of
	  LLONG_MIN and LLONG_MAX.

	* Only check for fts.h if --enable-builtinls.

	* Explicitly exit(1) at the end of main(), to suppress a compile
	  warning on certain systems.

Sun Jul 22 11:27:29 UTC 2007	lukem

	* Sync to config.guess 2007-07-22, config.sub 2007-06-28.

	* Rename configure.in to configure.ac.

	* Overhaul to use autoconf 2.61 instead of autoconf 2.13.
	  Notable differences:
	    - --with-pam to enable PAM.
	    - --with-skey improved.
	    - build-related auxiliary files now in ./build-aux/
	    - large-file support should be better detected
	    - use autoconf 2.61 macros to detect struct members, declarations,
	      types (etc).
	    - remove support for SOCKS for now (until test systems are
	      available)
	    - use #if defined(foo)  rather that just #if foo.
	    - always use our arpa_ftp.h rather than trying to detect if
	      FTP_NAMES works.

Mon Mar 19 01:00:19 UTC 2007	lukem

	* Change the return value of the replacement gai_strerror()
	  from "char *" to "const char *", to match the current
	  standards.
	  Problem noted by Thomas Klausner.

Mon Dec 18 04:08:33 UTC 2006	lukem

	* Tagged as "tnftpd-20061217".

	* Updated version to "tnftpd 20061217".

	* Provide a replacement daemon(3) for systems that lack it.

Mon Dec  4 02:09:16 UTC 2006	lukem

	* Tagged as "tnftpd-20061204".

	* Updated version to "tnftpd 20061204"

	* Added NEWS file back.

Wed Sep 27 05:22:18 UTC 2006	lukem

	* Implement ftpd_poll() using poll(), or select() if poll() isn't
	  available.  Reenable -D, using ftpd_poll().

	* Check for pidfile()

	* Improve quoting when using various autoconf macros.
	  Use AC_SEARCH_LIBS() instead of AC_CHECK_LIB()

	* Search for poll.h, sys/poll.h, a native poll(), and struct pollfd.
	  (Shamelessly cribbed from tnftp)

	* Include <arpa/nameser.h> if available, and provide fallback #defines.
	  Update prototype of inet_ntop() for socklen_t change.

	* Only support -6  #ifdef INET6.

	* Update to NetBSD-ftpd 20060923:
		* Rename debug -> ftpd_debug, xstrdup -> ftpd_strdup
		* Fix comment about DEFAULT_UMASK.
		  Pointed out in private mail by Tetsuya Isaki and Dmitry
		  Sivachenko.
		* Add recvbufsize configuration option.
		  This allows for setting the passive socket's SO_RCVBUF.
		  Option works similarly to the current sendbufsize
		  configuration option.
		* Change how recveive_data() works.  When reading data from
		  the socket for passive transfers to the server,
		  receive_data() now works very similar to
		  send_data_with_read().  Reads from the network are now done
		  using either the filesystem block size or the configuration
		  option readsize chunks.
		* Add hidesymlinks configuration option.  This adds a -L to
		  all ls command arguments so that the file or directory the
		  link references is listed rather than the link itself.
		  This was inspired by IRIX ftpd's -S option.
		* Change _PATH_FOO to _NAME_FOO where FOO is not a path.
		* Reorder some declarations so that parsers generated by
		  bison can compile.
		  Fix from Michael Richardson.
		* Implement option "-D", for running ftpd in standalone mode
		  (daemon).  ftpd will listen on the default FTP port for
		  incoming connections and fork a child for each connection.
		  This is lower overhead than starting ftpd from inetd(8) and
		  thus might be useful on busy servers to reduce load.
		  Inspired by FreeBSD.
		* Change (mostly) int to socklen_t.  GCC 4 doesn't like that
		  int and socklen_t are different signness.
		* Remove unreachable code (res could never be NULL here).
		  Fixes Coverity CID 712.
		* Set file to NULL after calling fclose().
		  Fixes Coverity CID 2669.
		* Make sure that "su" is initialized before dereferencing it.
		  Fixes Coverity CID 1075.
		* Fix some typos.
		* NLST should return 450 instead of 550 upon error, per RFC 959.
		* logxfer(): don't use the same buffer to store the results
		  of two separate concurrent realpath(3)s, otherwise we'll
		  log the wrong information for a rename.
		  Noted by Dmitry Sivachenko in private mail.
		* s/getpwnam/sgetpwnam/ Found by John Nemeth.
		* Add PAM and LOGIN_CAP support. Mostly from FreeBSD. If pam
		  is defined, then we don't fall back to other authentications
		  even if PAM fails due to a system error
		  (e.g. configuration problem).
		* Fix inverted test for expired passwords.
		* Cleanup utmp and utmpx support.
			- make them symmetric
			- add a function to open the wtmp file explicitly
			  very early in the game
		* Apply patch from PR bin/33261 sent by FUKAOMI Naoki:
		  "ftpd does not update wtmpx".

	* Sync with lib/libc/inet/inet_pton.c 1.3:
		* Sync to bind 9.3.x version
		* Update ISC copyright
		* Use NS_xxx definitions (provided by tnftpd.h if necessary)
		* Fix some lint

	* Sync with lib/libc/inet/inet_ntop.c 1.3:
		* Sync to bind 9.3.x version
		* Update ISC copyright
		* Use NS_xxx definitions (provided by tnftpd.h if necessary)
		* Use socklen_t instead of size_t
		* Use snprintf() instead of SPRINTF()
		* Improve detection of various boundary conditions

	* Sync with lib/libc/inet/inet_net_pton.c 1.1:
		* Implement AF_INET6.

	* Sync to NetBSD glob.h 1.21, glob.c 1.16:
		* Standards compliance fix
		* De-lint
		* Don't overflow when DEBUG is defined.

	* Sync fgetln.c to tools/compat/fgetln.c 1.7:
		- Clause 3 removal.

Mon Jul 25 15:31:21 UTC 2005	ginsbach

	* System V shadow password portability additions:
		+ Support password aging via shadow sp_lstchg, sp_min, and
		  sp_max fields.
		+ Support account expiration va shadow sp_expire field.

	* Update ftpd.c to NetBSD-ftpd 20041209
		+ Fix inverted test for aged passwords.

Wed Dec  1 09:17:50 UTC 2004	lukem

	* Add autoconf test for struct passwd.pw_change

	* Update to NetBSD-ftpd 20041119:
		* Don't write trash in ut_ss; either initialize it to 0, or
		  put in the proper information.
		* Add (unsigned char) cast to ctype functions
		* Don't allow accounts with age expired passwords to login.
		  Any account that is required to change their password
		  will not be allowed FTP access.  Inspired by similar
		  functionality in other FTP daemons.

Tue Aug 10 00:59:10 UTC 2004	lukem

	* Tagged as "tnftpd-20040810".

	* Updated version to "tnftpd 20040810"

Tue Aug 10 00:48:58 UTC 2004	lukem

	* BSD/OS 3.0 portability fixes from Jeremy C. Reed:
		* Use _POSIX_LOGIN_NAME_MAX if sysconf(_SC_LOGIN_NAME_MAX)
		  doesn't exist.
		* If _POSIX_LOGIN_NAME_MAX is missing, use LOGIN_NAME_MAX.
		* Provide definition for missing MAP_FAILED.

	* Provide prototype for vsnprintf() if ! HAVE_SNPRINTF.
	  (We may need to implement separate autoconf test for this.)

	* Remove autoconf test and libnetbsd support for vsyslog().

	* Update to NetBSD-ftpd 20040809:
		Fixes from (or inspired by) OpenBSD:
		* Fix yacc parser error recovery so that setjmp(3)/longjmp(3)
		  is unnecessary.
		* Fix SIGURG handler to set an urgflag that's later tested,
		  rather than abusing setjmp(3)/longjmp(3).
		* Use "volatile sig_atomic_t" as the type of variables
		  modified by sig handlers.
		* Use sigaction(3) instead of signal(3) to set the signal
		  handlers.
		* Only set the main SIGALRM handler once.  If we need to
		  change it, cache the old handler and restore appropriately..
		* Remove a bunch of signal races by improving the signal
		  handlers.
		* Fix memory leak with 'ESPV ALL'.
		* Correctly clamp illegal "SITE CHMOD" mode values.
		* Fix minor memory leak with fromname.

		Fixes by lukem:
		* Clean up the debug message in reply(); use vsnprintf(3)
		  instead of vsyslog(3).
		* Rework parsing of OOB commands to _not_ use the yacc
		  parser, since the latter isn't reentrant and the hacks to
		  work around that are ugly.  We now examine urgflag at
		  appropriate locations and call handleoobcmd() if it's set.
		  Since the only OOB commands we currently implement are ABOR
		  and STAT, this isn't an issue.

Fri Dec 19 22:57:50 UTC 2003	grant

	* Honour --sysconfdir.

Thu Dec 18 00:49:31 UTC 2003	lukem

	* Tagged & released as "tnftpd-20031217"

Wed Dec 17 01:44:40 UTC 2003	lukem

	* Updated version to "tnftpd 20031217".

	* Fix merge botch in fts_open, which was the cause of the
	  "inbuilt ls doesn't work without -L" bug that Andrew Brown found.
	  Specific problem highlighted by Onno van der Linden.

	* Fix cut & paste botch in fallback #define for LLONG_MIN.
	  (noted by Onno).

Tue Dec 16 02:13:49 UTC 2003	lukem

	* Document how to enable large file support on Solaris.

	* Use LLONG_{MIN,MAX} instead of QUAD_{MIN,MAX}, and provide
	  fallback #defines for the former.

	* Rename HAVE_QUAD_SUPPORT to HAVE_WORKING_LONG_LONG.

Tue Dec 16 00:42:58 UTC 2003	lukem

	* Updated version to "tnftpd 20031216".

	* Update fts_open to avoid race condition, and improve portability
	  for LP64 platforms.
	  Thanks to Onno van der Linden for the "heads up" on this issue.

	* Sync strlcpy & strlcat to NetBSD for Todd Miller's latest license
	  and fix a potential SEGV in strlcat.

	* Convert the 4 clause UCB licensed code to the 3 clause license.

Wed Dec 10 02:30:19 UTC 2003	lukem

	* tagged as "tnftpd 20031210"

	* import example configuration files into examples/
	  from NetBSD-current's src/share/examples/ftpd.

	* update to NetBSD-current ftpd 2003-12-10
		- Move UCB-licensed code from 4-clause to 3-clause licence.
		  Patches provided by Joel Baker in PR 22284
		- Add ftpd_loginx() and ftpd_logwtmpx() and use them to hold
		  wtmpx file open while a session.  Close bin/21692 by
		  bqt@Krille.Update.UU.SE.
		- Fix typos accidentally introduced in rev 1.70 as part of the
		  large number support.  (NetBSD yacc didn't barf on these,
		  although Solaris and HP/UX's did...)
		- Don't declare "yylex()" static; AFAICT it shouldn't be, and
		  it causes build problems with the output of some versions
		  of yacc.
		- Use sysconf(_SC_LOGIN_NAME_MAX) to determine the length of
		  login names, rather than assuming LOGIN_NAME_MAX.  Based on
		  patch from Garrett Wollman via David O'Brien (both at
		  FreeBSD.org)
		- netbsd.org->NetBSD.org
		- Move Jason Downs's code from a 4-clause to a 3-clause
		  licence by removing the advertising clause.  Diffs provided
		  in PR 22410 by Joel Baker, confirmed to the board by Jason
		  Downs.  With additional thanks to Jason Thorpe.

Wed Dec 10 01:33:35 UTC 2003	lukem

	* replace netbsd.org with NetBSD.org as appropriate.

	* replace libnetbsd/fgetln.c with the better version
	  that Christos wrote (as found in tnftp).

Thu Jul 31 09:10:49 UTC 2003	lukem

	* work-around missing LLONG_MAX and LLONG_MIN on Darwin.
	  Patch from Yuji Yamano <yyamano@NetBSD.org>

Mon Mar  3 03:42:42 UTC 2003	lukem

	* manually apply revs 1.75-1.76 from netbsd repo:
		- fix typos accidentally introduced in rev 1.70
		- don't declare yylex() static.

	* replace missing sete[gi]uid() with setres[ug]id() if the
	  latter exists.  (for HP-UX)

Fri Feb 28 04:02:48 UTC 2003	lukem

	* replace references to `ftpd' in manual pages with `tnftpd',
	  update the dates, and regenerate the catdoc pages.

Thu Feb 27 03:15:51 UTC 2003	lukem

	* tagged as "tnftpd 2.0 beta3"

	* only use MAP_FILE if its available

Wed Feb 26 14:51:51 UTC 2003	lukem

	* fixes from Tetsuya Isaki <isaki@NetBSD.org>:
		- provide adhoc definition of LOGIN_NAME_MAX for slackware 8.1
		- need unistd.h before fnmatch.h; tnftpd.h already did this,
		  but configure.in did not.  (for slackware 8.1)
		- sys/time.h needs to be before sys/resource.h on freebsd 4.3

	* update to NetBSD-current 2003-02-26
		- add '-L xferlogfile'
		- rename local copies of log{in,out,wtmp}() to have ftpd_ prefix
		- use LLT and STRTOLL() for parsing "larger than int" args
		- fix some uninitialised variables
		- remove dummy "" arg from .Nm in man pages


Mon Feb 24 06:32:44 UTC 2003	lukem

	* update to NetBSD-current 2003-02-23
		- maintain a cwd cache
		- rename login/logout/logwtmp() to have ftpd_ prefixes.
		- always remember the "curname", even if logging is disabled
		- fix help usage for PORT.
		- stop ftpd changing inetd's 'logname'.
		- Stop buffer overrun if {NGROUPS_MAX} is greater than the
		  compile time NGROUPS_MAX
		- Apply DoS fix from Crist J. Clark, where port 20 was
		  bound to for an extended period of time, locking out
		  all other PORT connections.

Sun Dec  8 13:09:20 UTC 2002	lukem

	* tagged as "tnftpd 2.0 beta2"

	* build & install as "tnftpd" (instead of "ftpd")

	* provide replacement for strsuftollx()

	* update to NetBSD-current 2002-10-08

Sat Oct 26 12:25:03 UTC 2002	lukem

	* tagged as "tnftpd 2.0 beta1"

Sat Oct 26 03:24:45 UTC 2002	lukem

	* renamed release to `tnftpd'

	* renamed `libukem' to `libnetbsd'

Wed Jun  5 12:57:46 UTC 2002	lukem

	* don't bother checking if <glob.h> is usable since we're
	  always compiling in our own glob.c

Thu May 23 02:43:41 UTC 2002	lukem

	* released 1.2 beta 2

	* replace fnmatch(3) if FNM_CASEFOLD isn't available

Sat Mar 16 01:28:28 UTC 2002	lukem

	* libukem/glob.c: Fix two problems in the KNR->ANSI conversion
	  noticed by Yuji Yamano <yyamano@kt.rim.or.jp>

Thu Mar 14 06:02:31 UTC 2002	lukem

	* released 1.2 beta 1

Thu Mar 14 05:39:24 UTC 2002	lukem

	* libukem/snprintf.c: fix compile errors with gcc 3.x

Sat Mar  1 07:10:54 UTC 2002	lukem

	* update to NetBSD-current 2002-03-01
	    User visible changes include:
		- enable case insensitive fnmatch(3)ing for hostname globs
		  in ftpusers(5)
		- add 'denyquick' ftpd.conf(5) keyword
		- add 'private' ftpd.conf(5) keyword
		- use "advertise" in docco
	    User visible fixes:
		- reject SIZE requests for ASCII files > 10KB long
		- fixes for mlsd/mlst standards conformance
		- fix passive transfers for various web browsers
		- various glob(3) fixes
		- don't log xferlog-style entries if the transfer didn't start
		- fix skey password challenge
		- don't try and use the motd directive if it's not set

Thu Feb 28 01:39:06 UTC 2002	lukem

	* update libukem/glob.c from NetBSD's __glob13.c rev 1.22 and rev 1.23

Wed May  9 02:04:08 UTC 2001	lukem

	* released 1.1

Sat Apr 28 07:13:57 UTC 2001	lukem

	* released 1.1 beta 1

	* determine if crypt() and getusershell() need declarations

Wed Apr 25 06:27:08 UTC 2001	lukem

	* update to NetBSD-current 2001-04-25:
		- update copyrights
		- remove superfluous byte_count update in send_file_list
		- use own code instead of bothering with glob() to do ~
		  expansion in pathname; there's no need to support glob
		  wildcards in this case when it's not expanded here in the
		  non-~ case
		- As threatened, handle OOB commands from within ftpcmd.y.
		  This involved changing the yacc syntax to be line-oriented,
		  rather than having it run against the entire input at once,
		  and adding a flag to struct tab, to  indicate if or not
		  it's acceptable for a command to occur OOB.

Tue Apr 17 08:20:09 UTC 2001	lukem

	* look for <arpa/nameser.h>

	* pull in <arpa/nameser.h> for INADDRZ, IN6ADDRSZ and INT16SZ,
	  and define if missing

	* don't bother trying to use if_indextoname() in ip6_sa2str()
	  (fixes problems on MacOS X)

	* remove unused sverrno in warnx() and errx()

Fri Apr 13 16:02:40 UTC 2001	lukem

	* improve test for long long support so that it's only enabled
	  if printf supports %ll or %q and they do the right thing.
	  use %q instead of %ll #if HAVE_PRINTF_QD

	* added NEWS file

	* support S/Key with add support for --with-skey

	* pull up changes made in NetBSD in ftpcmd.y revision 1.61:
		make checkportcmd address family independent, and correct
		IPv4 case.  PR 12558.

Sun Apr  8 03:35:55 UTC 2001	lukem

	* release 1.0

Thu Apr  5 14:08:25 UTC 2001	lukem

	* search for lockf and flock, and use the first found (in that
	  order) to lock the pid files

	* pull up fix to glob.c from rev 1.21 of NetBSD's __glob13.c:
		- Fix sentinel for the buffer in globtilde. It was off
		  by x 2. Noted by Theo.

Thu Mar 29 16:57:17 EST 2001	lukem

	* release 1.0 beta 4

	* merge ftpd from NetBSD-current (20010329):
		- don't leak globbed memory.

	* only look for setproctitle in -lutil if fparseln wasn't found in it

	* only REPLACE_FUNC(fparseln) if it wasn't found in -lutil

	* always compile in local glob; it's the best way to ensure that
	  various security issues are fixed

	* update glob(3) to netbsd-current (20010329), adding support for
	  GLOB_LIMIT and fixing various buffer overflows.

	* support --enable-builtinls (default) and --disable-builtinls

Sun Mar 18 10:14:17 UTC 2001	lukem

	* detect if d_namlen exists in struct dirent, and use in
	  fts_open() appropriately

Sun Mar 18 08:30:01 UTC 2001	lukem

	* released 1.0 beta3

	* use inbuilt ls source

	* autoconf improvements:
		- replace missing fts_open, strmode, user_from_uid
		- detect if optreset exists, and only use if it does
		- fix AC_MSG strings (remove comma's from the messages)

	* fixes to inbuilt ls:
		- revert part of previous
		- add rcsid
		- remove stat_flags; flags_to_string is unused (i.e, ignore -o)
		- conditionally support S_IFWHT
		- hardcode blocksize to 1K
		- remove support for nsec comparison in time sorting

Sat Mar 17 12:02:51 UTC 2001	lukem

	* generate cat manpages

	* merge ftpd from NetBSD-current (20010317):
		- make sure we do not return stray " at the end of stirng,
		  like bla"\0.  From: "William C. Allen" <allenwc@home.com>
		- ensure replydirname() do not truncate the names.
		  From: Paul Janzen <pjanzen@foatdi.harvard.edu>
		- don't support t(erabyte) as a suffix in strsuftoll()
		  #ifdef NO_LONG_LONG
		- Use GLOB_LIMIT. Also fix a bug where gl_offs was not
		  initialized and could contain trash.
		- fix redundant declarations.
		- comment or delete text after CPP directives.
		- consistently use syslog priorities

	* improve detection of working glob(), including requiring GLOB_LIMIT.
	  don't bother explicilty looking for glob.h; the test above will
	  detect that.

	* update replacement glob() to support GLOB_LIMIT

	* look for setproctitle in -lutil as well

	* pull in <paths.h> if it exists, but still check each _PATH_xxx and
	  define to something sane if not found; certain platforms have a
	  lobotomised <paths.h>

Fri Mar 16 08:27:09 EST 2001	lukem

	* in getusershell.c, remove __P() and const cruft

	* undef _PATH_FTPUSERS before defining

	* define _PATH_SHELLS if there's no <path.h>

Wed Mar 14 18:49:57 EST 2001	lukem

	* released 1.0 beta2

	* add COPYING INSTALL README THANKS

	* replace missing vsyslog

Sat Mar 10 09:15:46 EST 2001	lukem

	* replace missing getusershell

	* look for vfork and don't use if it doesn't exist

	* note tru64 doesn't have vsyslog (still to fix)

	* prototype getusershell et al if missing

Fri Mar  9 06:27:08 EST 2001	lukem

	* released 1.0 beta1

	* look for libutil.h (FreeBSD) as well as util.h (NetBSD)

	* change the way that glob(3) is checked for 4.4BSD feature
	  compliance so that it's much more robust

	* add strtoll()

Thu Feb  1 12:24:00 EST 2001	lukem

	* released 1.0 alpha
